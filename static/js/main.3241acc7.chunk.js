(this.webpackJsonpwmsapp=this.webpackJsonpwmsapp||[]).push([[0],{61:function(e,t,a){e.exports=a(91)},66:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),l=(a(66),a(20)),m=a(31),s=a(24),i=a(54),u=Object(n.createContext)();function p(){return Object(n.useContext)(u)}var g=function(e){var t=e.component,a=Object(i.a)(e,["component"]),n=p();return r.a.createElement(s.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/"})}}))},d=a(128),b=a(132),h=a(127),f=a(130),v=a(53),E=a.n(v),O=a(129),j=a(52),w=a(125),S=a(51),C=a.n(S),k=a(131),x=Object(j.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function I(){var e=x(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(!1),i=Object(l.a)(m,2),u=i[0],g=i[1],v=Object(n.useState)(""),j=Object(l.a)(v,2),S=j[0],I=j[1],y=Object(n.useState)(localStorage.getItem("api_host")),W=Object(l.a)(y,2),_=W[0],N=W[1],T=Object(n.useState)(localStorage.getItem("api_user")),q=Object(l.a)(T,2),A=q[0],J=q[1],P=Object(n.useState)(localStorage.getItem("api_pass")),M=Object(l.a)(P,2),V=M[0],B=M[1],D=p().setAuthTokens,F="/rest/V1/integration/admin/token";return o?r.a.createElement(s.a,{to:"/wms"}):r.a.createElement(w.a,{component:"main",maxWidth:"xs"},r.a.createElement(h.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(d.a,{className:e.avatar},r.a.createElement(E.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"Sign in"),u&&r.a.createElement(k.a,{bgcolor:"background.paper",borderColor:"error.main",m:1,border:1,style:{width:"100%",padding:"10px",textAlign:"center"}}," ",S," "),r.a.createElement("form",{className:e.form,noValidate:!0},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"hostname",label:"Magento Hostname",name:"hostname",autoComplete:"hostname",autoFocus:!0,onChange:function(e){N(e.target.value)},placeholder:"https://www.mysite.com/",value:_}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",onChange:function(e){J(e.target.value)},value:A}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){B(e.target.value)},value:V}),r.a.createElement(b.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){var e=_.trim()+F;C.a.post("https://wms.genmato.com/api/v1/login",{host:e,username:A,password:V}).then((function(e){200===e.status?(D(e.data),c(!0),localStorage.setItem("api_host",_),localStorage.setItem("api_user",A),localStorage.setItem("api_pass",V)):(g(!0),I(e.message))})).catch((function(e){console.log(e),g(!0)}))}},"Sign In"))))}var y=function(e){return r.a.createElement("div",null,"WMS Page")};var W=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),o=a[0],c=a[1];return r.a.createElement(u.Provider,{value:{authTokens:o,setAuthTokens:function(e){localStorage.setItem("tokens",JSON.stringify(e)),c(e)}}},r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(s.b,{exact:!0,path:"/",component:I}),r.a.createElement(g,{path:"/wms",component:y}))))};c.a.render(r.a.createElement(W,null),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.3241acc7.chunk.js.map